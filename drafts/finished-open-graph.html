<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Finished open graph</title>
  <title>Mandaris</title>
  <base href="..">
  <link rel="stylesheet" type="text/css" href="/theme/tufte-css/tufte.css" />
  <link rel="stylesheet" type="text/css" href="/theme/css/main.css" />
  <link rel="shortcut icon" type="text/css" href="/favicon.ico" />
  <link href="http://quotidianquest.com/feeds/atom.xml" type="application/atom+xml"
        rel="alternate" title="Quotidian Quest ALL Atom Feed" />

  <!-- OpenGraph Info -->
</head>

<body>
<header>
  <h1 class="websitetitle"><a href="..">Quotidian Quest</a></h1>
  <nav class="navmenu" id="navmenu">
    <li><a class="navitemlink" href="../archives.html">Archive</a></li>
    <li><a class="navitemlink" href="../pages/about.html">About</a></li>
    <li><a class="navitemlink" href="../pages/projects.html">Projects</a></li>
   </nav>
 </header>
<article>

<header class="post-header">
<h1>
<a rel="bookmark"
   href="drafts/finished-open-graph.html"
   title="Finished open graph «Quotidian Quest»">
   Finished open graph
</a>
</h1>
<p class="subtitle"><time datetime="2016-03-06T13:16:22-08:00">Sun 06 March 2016</time><label for="finished-open-graph" class="margin-toggle"> ⊕</label><input type="checkbox" id="finished-open-graph" class="margin-toggle" /><span class="marginnote">Category: <a href="../category/blogging.html">blogging</a><br />
 #<a href="../tag/misc.html">misc</a></span></p>
</header><p>So,  I spent about 3 hours working on getting Open Graph tags to work in the theme that I created. I've got mixed feeling about it because I started off by adding the tags myself to the base template.</p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">OPEN_GRAPH</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;meta property=&quot;og:title&quot; content=&quot;</span><span class="cp">{{</span> <span class="nv">SITENAME</span> <span class="cp">}}</span><span class="x">&quot;/&gt;</span>
<span class="x">&lt;meta property=&quot;og:type&quot; content=&quot;website&quot;/&gt;</span>
<span class="x">&lt;meta property=&quot;og:description&quot; content=&quot;</span><span class="cp">{{</span> <span class="nv">SITE_DESCRIPTION</span> <span class="cp">}}</span><span class="x">&quot;/&gt;</span>
<span class="x">&lt;meta property=&quot;og:url&quot; content=&quot;</span><span class="cp">{%</span> <span class="k">SITE_URL</span> <span class="cp">%}</span><span class="x">&quot;/&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="nv">OPEN_GRAPH</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>


<p>This worked for the site in general but doesn't translate to all the articles and this caused me to go into a some what deep dive into how Pelican and Jinja parses blocks and if statements. I started off with putting all the tags into the base and then doing individual changes to tags that need to be changed for. </p>
<p><strong>BAH!!!</strong></p>
<p>So, took a step back and looked into what plugins were already available. And there is was! <a href="https://github.com/whiskyechobravo/pelican-open_graph">Pelican-open_graph</a>! I was home free! Or so I thought, until I tried to use it. The plugin has three problems. </p>
<h2>It doesn't  account for when someone does <em>not</em> have a modified date on their articles.</h2>
<p><a href="https://github.com/AntoineVe/pelican-open_graph">Luckily, someone had put a solution up</a>. The change was forked about 7 months ago today and it looks like whoever created the open graph plugin has taken a break to work on other things.</p>
<h2>It's a year old and hasn't made the changes for pelican regarding summaries of articles.</h2>
<p>So, I had to do some debugging to find out that the code needed to be changed in the following way<sup id="fnref:payitforward"><a class="footnote-ref" href="#fn:payitforward" rel="footnote">1</a></sup>.</p>
<div class="highlight"><pre><span class="n">ogtags</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;og:description&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;og_description&#39;</span><span class="p">,</span>
                                                           <span class="n">instance</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;summary&#39;</span><span class="p">,</span>
                                                                                 <span class="n">instance</span><span class="o">.</span><span class="n">summary</span><span class="p">))))</span>
</pre></div>


<h2>It also assumed that every article has some kind of tag.</h2>
<p>I've decided to just punt this problem and add the tags to the 6 articles that don't have them.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:payitforward">
<p>I've got to branch and push this fix. I don't know how many other people are using pelican or this plugin but if I can save them or future me some time...&#160;<a class="footnote-backref" href="#fnref:payitforward" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
</article>
<footer>
  <p>Powered by <a href="http://pelican.readthedocs.org">Pelican</a></p>
</footer>
</body>
</html>